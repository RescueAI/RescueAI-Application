<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" type="text/css" href="index.css" media="screen" />
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"> </script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"> </script>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RescueAI - Automated Search and Rescue</title>

  <!-- Script code for application all in here. -->
  <script type="text/javascript" src="src/external.js"></script>
  
</head>
<body>


  <div class="app-layout">

      <!-- Mission Planning Module -->
      <div class="app-module-wrapper">
        <div class="app-mission-wrapper">
          <!-- TODO: Mission Configuration Dialog-->
          <div class="mission-config-container">
            Mission Configuration❖︎
          </div>
          
          <!-- TODO: Mission Controls -->
          <div class="mission-control-container">
            <!-- TODO: Mission CRUD Operations -->
            <div class="mission-crud">
              <button class="primary-btn" onclick="clicked('NEW', false)">New</button>
              <button class="primary-btn" onclick="clicked('EDIT', false)">Edit</button>
              <button class="primary-btn" onclick="clicked('DELETE', false)">Delete</button>
            </div>
            <!-- TODO: Display Mission Configurations -->
            <div class="general-container">
              <div class="mission-labels">
                <label>Mission Select</label>
              </div>
              <div class="mission-select">
                Mission Select Content
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Video Feed Module -->
      <div class="app-module-wrapper">
        <!-- TODO: Fix video wrapper to maintain aspect ratio.-->
        <div class="app-video-wrapper">
          <canvas id="camera-output" class="video-view"></canvas>
          <p style="position:absolute;">TODO: VIDEO STREAM</p>
        </div>
      </div>

      <!-- Event Alerts Module -->
      <div class="app-module-wrapper ">
        <div class="app-event-wrapper">
          <div class="event-log-container">
            Event Container
          </div>
        </div>
      </div>

      <!-- Navigation Control and Action Alerts Module -->
      <div class="app-module-wrapper">
        <div class="app-control-wrapper">
          Control Container
        </div>
      </div>
  </div>

  <!--Inline JS stuff below-->

  <script async src="./opencv.js" onload="openCvReady();"></script>
  <script>
    const text = document.getElementById('cv');
    const imgElement = document.getElementById("img");

    const video = document.getElementById("video");

    const FPS = 30;
    const height = 320;
    const width = 480;


    function processVideo() {

    }
    

    function openCvReady() {
      cv['onRuntimeInitialized'] = () => {


        const mat = cv.imread(imgElement);
        const dst = new cv.Mat();

        cocoSsd.load().then((model) => {
          model.detect(imgElement).then(predictions => {
            console.log(predictions);
          })
        })


        cv.imshow('img-out', dst)
        
        mat.delete();
        dst.delete();
      }
    }
    


  </script>
</body>
</html>